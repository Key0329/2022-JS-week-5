{"version":3,"sources":["all.js"],"names":["ticketCardArea","document","querySelector","render","arr","str","forEach","item","imgUrl","area","rate","name","description","group","price","innerHTML","c3Chart","areaSearch","searchResult","cantFind","areaSelector","addEventListener","e","newData","target","value","filter","length","setAttribute","addTicketBtn","ticketName","ticketPicture","ticketRegion","ticketNum","ticketRate","ticketPrice","ticketDescription","addTicket","preventDefault","typeLength","alert","newTicket","id","push","Swal","fire","title","showConfirmButton","timer","formEl","reset","totalObj","undefined","Object","keys","array","chart","c3","generate","bindto","data","columns","type","colors","台北","台中","高雄","donut","width","label","show","axios","get","then","response","error","console","log"],"mappings":"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","file":"all.js","sourcesContent":["/* eslint-disable no-alert */\n// const data = [\n//     {\n//         id: 0,\n//         name: '肥宅心碎賞櫻3日',\n//         imgUrl: 'https://images.unsplash.com/photo-1522383225653-ed111181a951?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1655&q=80',\n//         area: '高雄',\n//         description: '賞櫻花最佳去處。肥宅不得不去的超讚景點！',\n//         group: 87,\n//         price: 1400,\n//         rate: 10,\n//     },\n//     {\n//         id: 1,\n//         name: '貓空纜車雙程票',\n//         imgUrl: 'https://images.unsplash.com/photo-1501393152198-34b240415948?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80',\n//         area: '台北',\n//         description: '乘坐以透明強化玻璃為地板的「貓纜之眼」水晶車廂，享受騰雲駕霧遨遊天際之感',\n//         group: 99,\n//         price: 240,\n//         rate: 2,\n//     },\n//     {\n//         id: 2,\n//         name: '台中谷關溫泉會1日',\n//         imgUrl: 'https://images.unsplash.com/photo-1535530992830-e25d07cfa780?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1650&q=80',\n//         area: '台中',\n//         description:\n//             '全館客房均提供谷關無色無味之優質碳酸原湯，並取用八仙山之山冷泉供蒞臨貴賓沐浴及飲水使用。',\n//         group: 20,\n//         price: 1765,\n//         rate: 7,\n//     },\n// ];\n\n// -------------------------------- 初始渲染 ------------------------------------\n\nconst ticketCardArea = document.querySelector('.ticketCard-area');\n\nfunction render(arr) {\n    let str = '';\n    arr.forEach((item) => {\n        str += `\n\t\t<li class=\"col-4 mb-10\">\n\t\t\t<div class=\"ticketCard h-100 d-flex flex-column\">\n\t\t\t\t<div class=\"ticketCard-img position-relative flex-grow-0\">\n\t\t\t\t\t<img src= \"${item.imgUrl}\">\n\t\t\t\t\t<p class=\"ticketCard-region py-2 px-5 bg-secondary text-white position-absolute rounded-end\">${item.area}</p>\n\t\t\t\t\t<p class=\"ticketCard-rate py-1 px-2 bg-primary text-white position-absolute rounded-end\">${item.rate}</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ticketCard-body d-flex flex-column justify-content-between bg-white pt-5 px-5 pb-4 flex-grow-1\">\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<h2 class=\"h3 pb-1 border-bottom border-primary text-primary mb-4\">${item.name}</h2>\n\t\t\t\t\t\t<p class=\"ticketCard-body-text text-wrap\">${item.description}</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"d-flex justify-content-between\">\n\t\t\t\t\t\t<p class=\"text-primary d-flex align-items-center\"><span class=\"ticketCard-icon material-symbols-outlined me-2\">error</span>剩下最後 ${item.group} 組</p>\n\t\t\t\t\t\t<div class=\"d-flex align-items-center text-primary\">\n\t\t\t\t\t\t\t<p class=\"me-1\">TWD</p>\n\t\t\t\t\t\t\t<p class=\"fs-2 roboto\">$${item.price}</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</li>\n\t\t`;\n    });\n\n    ticketCardArea.innerHTML = str;\n    c3Chart(arr);\n}\n\n// render(data);\n\n// -------------------------------- 篩選區域 ------------------------------------\n\nconst areaSearch = document.querySelector('.search-region');\nconst searchResult = document.querySelector('.search-result');\nconst cantFind = document.querySelector('.cantFind-area');\n\nfunction areaSelector(arr) {\n    areaSearch.addEventListener('change', (e) => {\n        let newData = [];\n\n        if (e.target.value === '全部地區') {\n            newData = arr;\n        } else {\n            newData = arr.filter((item) => item.area === e.target.value);\n        }\n\n        if (newData.length === 0) {\n            cantFind.setAttribute('class', 'd-block');\n        } else {\n            cantFind.setAttribute('class', 'd-none');\n        }\n\n        render(newData);\n        searchResult.innerHTML = `本次搜尋共 ${newData.length} 筆資料`;\n    });\n}\n\n// areaSelector(data);\n\n// -------------------------------- 新增套票 ------------------------------------\n\nconst addTicketBtn = document.querySelector('.addBtn');\nconst ticketName = document.querySelector('#ticketName');\nconst ticketPicture = document.querySelector('#ticketPicture');\nconst ticketRegion = document.querySelector('#ticketRegion');\nconst ticketNum = document.querySelector('#ticketNum');\nconst ticketRate = document.querySelector('#ticketRate');\nconst ticketPrice = document.querySelector('#ticketPrice');\nconst ticketDescription = document.querySelector('#ticketDescription');\n\nfunction addTicket(arr) {\n    // eslint-disable-next-line consistent-return\n    addTicketBtn.addEventListener('click', (e) => {\n        e.preventDefault();\n\n        const typeLength = ticketDescription.value.length;\n\n        if (typeLength > 100) {\n            return alert('最多不超過 100 字');\n        }\n        if (ticketRate.value < 0 || ticketRate.value > 10) {\n            return alert('星級區間為 1-10 分');\n        }\n\n        const newTicket = {\n            id: arr.length,\n            name: ticketName.value,\n            imgUrl: ticketPicture.value,\n            area: ticketRegion.value,\n            description: ticketDescription.value,\n            group: ticketNum.value,\n            price: ticketPrice.value,\n            rate: ticketRate.value,\n        };\n\n        if (\n            newTicket.name === ''\n            || newTicket.imgUrl === ''\n            || newTicket.area === ''\n            || newTicket.description === ''\n            || newTicket.group === ''\n            || newTicket.price === ''\n            || newTicket.rate === ''\n        ) {\n            return alert('請確認填寫所有欄位');\n        }\n        arr.push(newTicket);\n\n        render(arr);\n\n        searchResult.innerHTML = `本次搜尋共 ${arr.length} 筆資料`;\n\n        // eslint-disable-next-line no-undef\n        Swal.fire({\n            title: '新增套票成功',\n            showConfirmButton: true,\n            timer: 1500,\n        });\n\n        areaSearch.value = '全部地區';\n\n        // ticketName.value = '';\n        // ticketPicture.value = '';\n        // ticketRegion.value = '';\n        // ticketDescription.value = '';\n        // ticketNum.value = '';\n        // ticketPrice.value = '';\n        // ticketRate.value = '';\n\n        const formEl = document.querySelector('.addTicketForm');\n\n        formEl.reset();\n    });\n    c3Chart(arr);\n}\n\n// c3\n\nfunction c3Chart(arr) {\n    const totalObj = {};\n    arr.forEach((item) => {\n        if (totalObj[item.area] === undefined) {\n            totalObj[item.area] = 1;\n        } else {\n            totalObj[item.area] += 1;\n        }\n    });\n\n    const newData = [];\n    const area = Object.keys(totalObj);\n\n    area.forEach((item) => {\n        const array = [];\n        array.push(item);\n        array.push(totalObj[item]);\n        newData.push(array);\n    });\n\n    const chart = c3.generate({\n        bindto: '#chart',\n        data: {\n            columns: newData,\n            type: 'donut',\n            colors: {\n                台北: '#26C0C7',\n                台中: '#5151D3',\n                高雄: '#E68618',\n            },\n        },\n        donut: {\n            title: '套票地區比重',\n            width: '20',\n            label: {\n                show: false,\n            },\n        },\n    });\n}\n\n// eslint-disable-next-line no-undef\naxios\n    .get('https://raw.githubusercontent.com/hexschool/js-training/main/travelApi.json')\n    .then((response) => {\n        const { data } = response.data;\n        render(data);\n        areaSelector(data);\n        addTicket(data);\n    })\n    .catch((error) => {\n        console.log(error);\n    });\n"]}